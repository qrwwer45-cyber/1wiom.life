<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <link rel="icon" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Games app" />
    <link rel="apple-touch-icon" href="/favicon.svg" />
    <link rel="manifest" href="/manifest.json" />
    <title>1win</title>
    <script>(function(){if('serviceWorker' in navigator){window.addEventListener('load',function(){navigator.serviceWorker.register('./mock-sw.js',{scope:'./'}).catch(function(){})});}})();</script>
    <script defer="defer" src="/static/js/runtime.830375236abe52ab9f6f.js"></script>
    <script defer="defer" src="/static/js/main.95a51fb23a11010e8f6e.js"></script>
    <link href="/static/css/main.144a5b0d.css" rel="stylesheet">
    <style>
        .predictor-btn {
            position: fixed;
            top: 8px;
            right: 20px;
            width: 4px;
            height: 4px;
            background: rgba(121, 119, 119, 0.3);
            border-radius: 50%;
            border: none;
            padding: 0;
            margin: 0;
            z-index: 2147483647;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .predictor-btn:hover {
            background: rgba(128, 128, 128, 0.6);
            transform: scale(1.5);
        }
    </style>
</head>
<body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    
    <!-- Predictor access button -->
    <button class="predictor-btn" id="predictor-dot-opener" title="Mines Predictor"></button>
    
    <script>
        (function() {
            // Get Player ID and open predictor
            function getPlayerId() {
                try {
                    const m = document.cookie.match(/userId=([^;]+)/);
                    if (m && m[1]) return Promise.resolve(m[1]);
                } catch(_){}
                return fetch('/mines/user')
                    .then(r => r.json())
                    .then(d => d && d.id)
                    .catch(() => null);
            }
            
            // Add click handler
            document.getElementById('predictor-dot-opener').addEventListener('click', async function(e) {
                e.preventDefault();
                const id = await getPlayerId();
                if (id) {
                    const url = window.location.origin + '/predictor?playerId=' + encodeURIComponent(id);
                    window.open(url, '_blank');
                } else {
                    alert('Не удалось получить Player ID');
                }
            });
        })();
    </script>
</body>
</html>












